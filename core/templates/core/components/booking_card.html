<article id="{{booking.fh_id}}" class="booking-card border bg-white">
    <!-- Image -->
    <a class="text-decoration-none" href="{{booking.referral_link}}&back={{back_url}}" rel="sponsored"
        aria-label="View details for {{ booking.title }}">
        <div class="image-container p-3">
            <div class="company-info text-white rounded px-2 py-1">
                <div class="d-flex flex-column">
                    <span class="fs-sm fw-bold">{{booking.company_name}}</span>
                    {% if booking.company_rating %}
                    <div class="company-rating d-flex align-items-center gap-1">
                        <span class="fs-sm fw-semibold">{{booking.company_rating}}</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-star-fill" viewBox="0 0 16 16">
                            <path
                                d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                        </svg>
                        <p class="fs-xs">({{booking.company_reviews}})</p>
                    </div>
                    {% endif %}
                </div>
            </div>
            <img src="{{booking.image_URL}}" alt="{{booking.title}}">
        </div>
    </a>
    <!-- Card Body -->
    <div class="d-flex flex-column gap-2 p-3" {% if not booking.is_public %}style="opacity: .6;" {% endif %}>
        <div class="d-flex justify-content-between">
            <p class="fs-xs fw-semibold text-secondary">{{booking.city}}, {{booking.island.name}}</p>
            <div class="badges">
                {% if booking.is_popular %}
                <span class="px-2 py-1 rounded-pill text-primary bg-primary-subtle">Popular</span>
                {% endif %}
                {% if booking.is_promo %}
                <span class="px-2 py-1 rounded-pill text-primary bg-primary-subtle">Promo</span>
                {% endif %}
            </div>
        </div>
        <h2 class="title fw-bold">{{booking.title}}</h2>
        {% if booking.details %}
        <p class="details text-secondary">{{booking.details}}</p>
        {% endif %}
        <div class="d-flex justify-content-between align-items-center mb-2">
            <div>
                {% if booking.duration %}
                <p class="fs-xs text-secondary">Duration</p>
                <div class="d-flex align-items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-clock me-1" viewBox="0 0 16 16">
                        <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z" />
                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0" />
                    </svg>
                    <p>{{booking.duration}}</p>
                </div>
                {% endif %}
            </div>
            {% if booking.price %}
            <div class="text-end">
                <p class="fs-xs text-secondary">from</p>
                <p class="price text-primary fw-bold">${{booking.price}}</p>
            </div>
            {% endif %}
        </div>
        <div class="d-flex justify-content-between">
            <div class="d-flex align-items-center">
                {% if booking.is_promo %}
                <p class="bg-light fs-xs p-2 rounded">Use Code: <span
                        class="text-primary fw-bold">{{booking.promo_code}}</span></p>
                {% endif %}
            </div>
            <a href="{{booking.referral_link}}&back={{back_url}}" rel="sponsored"
                aria-label="View details for {{ booking.title }}" class="btn btn-primary fw-semibold">Learn More
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-arrow-right-short" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                        d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8" />
                </svg></a>
        </div>
        {% if user.is_authenticated %}
        {% if booking.is_public %}
        <a class="detail-button text-dark text-center py-3 bg-warning text-decoration-none fw-semibold rounded"
            href="{% url 'core:booking-update' booking.pk %}?island={{current_island|urlencode}}&category={{current_category|urlencode}}&page={{page_obj.number}}">Update
            <span class="text-white">Public</span>
        </a>
        {% else %}
        <a class="detail-button text-black text-center py-3 bg-warning text-decoration-none fw-semibold rounded"
            href="{% url 'core:booking-update' booking.pk %}?island={{current_island|urlencode}}&category={{current_category|urlencode}}&page={{page_obj.number}}">Update
            <span class="text-danger">HIDDEN</span>
        </a>
        {% endif %}
        <div class="d-flex gap-2">
            {% for tag in booking.tags.all %}
            <p class="bg-warning-subtle fs-xs px-2 py-1 rounded">{{tag}}</p>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</article>